$(document).ready(function(){function e(e){for(var t,i,a=e.length;a;t=parseInt(Math.random()*a),i=e[--a],e[a]=e[t],e[t]=i);return e}let i="https://api.mercadolibre.com/sites/MLA/categories";$.getJSON(i,function(e){var i=[];for($.each(e,function(e,t){"MLA1071"==t.id||"MLA1540"==t.id||"MLA1512"==t.id||i.push({label:t.name,value:t.id})}),t=0;t<i.length;t++)$("#hidden_categories").append(new Option(i[t].label,i[t].value))}),$("#main-btn").click(function(){$("#result").hide();let t=$("#tope").val(),i="MLA",a=$("#hidden_categories").val();if(""==t||""==a)return $("#result").html("<p>ElegÃ­ una categorÃ³a y completa cuanto queres gastar ðŸ¤”</p>"),$("#result").show(),$("#share").html(""),$("#share").hide(),!1;$(".form-signin").effect("shake"),$(".form-signin").effect("shake");let r="https://api.mercadolibre.com/sites/"+i+"/search?status=active&category="+a;$.getJSON(r,function(i){if(void 0===i.results)$("#result").html("<p> No encontre nada por ese precio ðŸ˜¢</p>"),$("#share").html(""),$("#share").hide(),$("#result").show();else{var a=[];if($.each(i.results,function(e,i){i.price<=t&&a.push({id:i.id,price:i.price,thumbnail:i.thumbnail,title:i.title,permalink:i.permalink,free_shipping:i.shipping.free_shipping,listing_type:i.listing_type_id})}),a.length<1)return $("#result").html("<p> No encontre nada por ese precio ðŸ˜¢</p>"),$("#share").html(""),$("#share").hide(),$("#result").show(),!1;e(a);let r='<p><img src="'+a[0].thumbnail+'" class="product-img"></p>';r+='<p class="title">'+a[0].title+"</p>",r+='<p class="price">$ '+a[0].price+"</p>",a[0].free_shipping&&(r+='<p class="shipping">EnvÃ­o gratis</p>'),"gold_pro"==a[0].listing_type&&(r+='<p class="listing_type">Cuotas sin interes</p>'),r+='<a target="_blank" href="'+a[0].permalink+'" class="w-100 btn btn-lg btn-primary mb-3">Comprar ahora</a>',r+='<p class="divider"></p>';let s="Â¿No sabes quÃ© comprar o regalar? ðŸ“¦ ";s+=" ðŸ‘€ ðŸ‘€ Busca tu prÃ³xima compra random de Mercado Libre en ðŸ‘‡ ",$("#share").html('<a class="twitter-share-button" href="https://twitter.com/intent/tweet" data-size="large"  data-url="https://chcibelli.github.io/shake-n-buy/" data-text="'+s+'">Tweet</a>'),twttr.widgets.load(),$("#result").html(r),$("#result, #share").show()}})}),$("#tope").on("keypress",function(e){return 13==e.which?($("#main-btn").click(),!1):!(e.which>31&&(e.which<48||e.which>57))})});